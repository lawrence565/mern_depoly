(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(25)},25:function(e,t,a){"use strict";a.r(t);var l=a(0),r=a.n(l),n=a(11),c=a.n(n),s=a(5),m=a(2),o=a(26);const u="http://localhost:8080/api/user";var i=new class{login(e,t){return o.a.post(u+"/login",{email:e,password:t})}logout(){localStorage.removeItem("user")}register(e,t,a,l){return o.a.post(u+"/register",{username:e,email:t,password:a,role:l})}getCurrentUser(){return JSON.parse(localStorage.getItem("user"))}};var E=e=>{let{currentUser:t,setCurrentUser:a}=e;return t&&console.log(t),r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link active",to:"/"},"\u9996\u9801")),!t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/register"},"\u8a3b\u518a\u6703\u54e1")),!t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/login"},"\u6703\u54e1\u767b\u5165")),t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{onClick:e=>{i.logout(),window.alert("\u767b\u51fa\u6210\u529f\uff01\uff0c\u5373\u5c07\u5c0e\u5411\u5230\u9996\u9801"),a(null)},className:"nav-link",to:"/"},"\u767b\u51fa")),t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/profile"},"\u500b\u4eba\u9801\u9762")),t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/course"},"\u8ab2\u7a0b\u9801\u9762")),t&&"instructor"==t.user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/postCourse"},"\u65b0\u589e\u8ab2\u7a0b")),t&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/enroll"},"\u8a3b\u518a\u8ab2\u7a0b"))))))))};var d=e=>{let{currentUser:t,setCurrentUser:a}=e;return t&&console.log("\u4ed6\u6703\u57f7\u884c"),console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{currentUser:t,setCurrentUser:a}),r.a.createElement(m.a,null))};var p=()=>r.a.createElement("main",null,r.a.createElement("div",{className:"container py-4"},r.a.createElement("div",{className:"p-5 mb-4 bg-light rounded-3"},r.a.createElement("div",{className:"container-fluid py-5"},r.a.createElement("h1",{className:"display-5 fw-bold"},"\u5b78\u7fd2\u7cfb\u7d71"),r.a.createElement("p",{className:"col-md-8 fs-4"},"\u672c\u7cfb\u7d71\u4f7f\u7528 React.js \u4f5c\u70ba\u524d\u7aef\u6846\u67b6\uff0cNode.js\u3001MongoDB \u4f5c\u70ba\u5f8c\u7aef\u670d\u52d9\u5668\u3002\u9019\u7a2e\u9805\u76ee\u7a31\u70ba MERN \u9805\u76ee\uff0c\u5b83\u662f\u5275\u5efa\u73fe\u4ee3\u7db2\u7ad9\u7684\u6700\u6d41\u884c\u7684\u65b9\u5f0f\u4e4b\u4e00\u3002"),r.a.createElement("button",{className:"btn btn-primary btn-lg",type:"button"},"\u770b\u770b\u5b83\u600e\u9ebc\u904b\u4f5c\u3002"))),r.a.createElement("div",{className:"row align-items-md-stretch"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"h-100 p-5 text-white bg-dark rounded-3"},r.a.createElement("h2",null,"\u4f5c\u70ba\u4e00\u500b\u5b78\u751f"),r.a.createElement("p",null,"\u5b78\u751f\u53ef\u4ee5\u8a3b\u518a\u4ed6\u5011\u559c\u6b61\u7684\u8ab2\u7a0b\u3002\u672c\u7db2\u7ad9\u50c5\u4f9b\u7df4\u7fd2\u4e4b\u7528\uff0c\u8acb\u52ff\u63d0\u4f9b\u4efb\u4f55\u500b\u4eba\u8cc7\u6599\uff0c\u4f8b\u5982\u4fe1\u7528\u5361\u865f\u78bc\u3002"),r.a.createElement("button",{className:"btn btn-outline-light",type:"button"},"\u767b\u9304\u6703\u54e1\u3001\u6216\u8005\u8a3b\u518a\u4e00\u500b\u5e33\u865f"))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"h-100 p-5 bg-light border rounded-3"},r.a.createElement("h2",null,"\u4f5c\u70ba\u4e00\u500b\u5c0e\u5e2b"),r.a.createElement("p",null,"\u60a8\u53ef\u4ee5\u901a\u904e\u8a3b\u518a\u6210\u70ba\u4e00\u540d\u8b1b\u5e2b\uff0c\u4e26\u958b\u59cb\u88fd\u4f5c\u5728\u7dda\u8ab2\u7a0b\u3002\u672c\u7db2\u7ad9\u50c5\u4f9b\u7df4\u7fd2\u4e4b\u7528\uff0c\u8acb\u52ff\u63d0\u4f9b\u4efb\u4f55\u500b\u4eba\u8cc7\u6599\uff0c\u4f8b\u5982\u4fe1\u7528\u5361\u865f\u78bc\u3002"),r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button"},"\u4eca\u5929\u958b\u59cb\u958b\u8a2d\u8ab2\u7a0b")))),r.a.createElement("footer",{className:"pt-3 mt-4 text-muted border-top"},"\xa9 2023 Wilson Ren")));var g=()=>{const e=Object(m.p)();let[t,a]=Object(l.useState)(""),[n,c]=Object(l.useState)(""),[s,o]=Object(l.useState)(""),[u,E]=Object(l.useState)(""),[d,p]=Object(l.useState)("");return r.a.createElement("div",{style:{padding:"3rem"},className:"col-md-12"},r.a.createElement("div",null,d&&r.a.createElement("div",{className:"alert alert-danger"},d),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"\u7528\u6236\u540d\u7a31:"),r.a.createElement("input",{onChange:e=>{a(e.target.value)},type:"text",className:"form-control",name:"username"})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\u96fb\u5b50\u4fe1\u7bb1\uff1a"),r.a.createElement("input",{onChange:e=>{c(e.target.value)},type:"text",className:"form-control",name:"email"})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u5bc6\u78bc\uff1a"),r.a.createElement("input",{onChange:e=>{o(e.target.value)},type:"password",className:"form-control",name:"password",placeholder:"\u9577\u5ea6\u81f3\u5c11\u8d85\u904e6\u500b\u82f1\u6587\u6216\u6578\u5b57"})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u8eab\u4efd\uff1a"),r.a.createElement("input",{onChange:e=>{E(e.target.value)},type:"text",className:"form-control",placeholder:"\u53ea\u80fd\u586b\u5165student\u6216\u662finstructor\u9019\u5169\u500b\u9078\u9805\u5176\u4e00",name:"role"})),r.a.createElement("br",null),r.a.createElement("button",{onClick:a=>{i.register(t,n,s,u).then(()=>{window.alert("\u8a3b\u518a\u6210\u529f\uff0c\u60a8\u5373\u5c07\u88ab\u5c0e\u5411\u767b\u5165\u9801\u9762"),e("/login")}).catch(e=>{p(e.response.data)})},className:"btn btn-primary"},r.a.createElement("span",null,"\u8a3b\u518a\u6703\u54e1"))))};var b=e=>{let{currentUser:t,setCurrentUser:a}=e,n=Object(m.p)(),[c,s]=Object(l.useState)(),[o,u]=Object(l.useState)(),[E,d]=Object(l.useState)();return r.a.createElement("div",{style:{padding:"3rem"},className:"col-md-12"},r.a.createElement("div",null,E&&r.a.createElement("div",{className:"alert alert-danger"},E),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"\u96fb\u5b50\u4fe1\u7bb1\uff1a"),r.a.createElement("input",{onChange:e=>{s(e.target.value)},type:"text",className:"form-control",name:"email"})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u5bc6\u78bc\uff1a"),r.a.createElement("input",{onChange:e=>{u(e.target.value)},type:"password",className:"form-control",name:"password"})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{onClick:async()=>{try{d("");let t=await i.login(c,o);localStorage.setItem("user",JSON.stringify(t.data)),window.alert("\u767b\u5165\u6210\u529f\uff0c\u5373\u5c07\u5c0e\u5411\u81f3\u500b\u4eba\u9801\u9762"),a(i.getCurrentUser()),n("/profile")}catch(e){d(e.response.data)}},className:"btn btn-primary btn-block"},r.a.createElement("span",null,"\u767b\u5165\u7cfb\u7d71")))))};var v=e=>{let{currentUser:t,setCurrentUser:a}=e;return r.a.createElement("div",{style:{padding:"3rem"}},!t&&r.a.createElement("div",null,"\u5728\u7372\u53d6\u60a8\u7684\u500b\u4eba\u8cc7\u6599\u4e4b\u524d\uff0c\u60a8\u5fc5\u9808\u5148\u767b\u9304\u3002"),t&&r.a.createElement("div",null,r.a.createElement("h2",null,"\u4ee5\u4e0b\u662f\u60a8\u7684\u500b\u4eba\u6a94\u6848\uff1a"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"\u59d3\u540d\uff1a",t.user.username))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"\u60a8\u7684\u7528\u6236ID: ",t.user._id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"\u60a8\u8a3b\u518a\u7684\u96fb\u5b50\u4fe1\u7bb1: ",t.user.email))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"\u8eab\u4efd: ",t.user.role)))))))};const N="http://;ocalhost:8080/api/course";var h=new class{post(e,t,a){let l;return l=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).token:"",o.a.post(N,{title:e,description:t,price:a},{headers:{Authorization:l}})}getEnrolledCourses(e){let t;return t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).token:"",o.a.get(N+"/student/"+e,{headers:{Authorization:t}})}getCoursesByName(e){let t;return t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).token:"",o.a.get(N+"/findByName/"+e,{headers:{Authorization:t}})}enroll(e){let t;return t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).token:"",o.a.post(N+"/enroll/"+e,{},{headers:{Authorization:t}})}get(e){let t;return t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).token:"",o.a.get(N+"/instructor"+e,{headers:{Authorization:t}})}};var y=e=>{let{currentUser:t,setCurrentUser:a}=e;const n=Object(m.p)();let[c,s]=Object(l.useState)();return Object(l.useEffect)(()=>{let e;t&&(e=t.user._id,"instructor"==t.user.role?h.get(e).then(e=>{s(e.data)}).catch(e=>{console.log(e)}):"student"==t.user.role&&h.getEnrolledCourses(e).then(e=>{s(e.data)}).catch(e=>{console.log(e)}))},[]),r.a.createElement("div",{style:{padding:"3rem"}},!t&&r.a.createElement("div",null,r.a.createElement("p",null,"\u60a8\u9700\u8981\u5148\u767b\u5165\u624d\u80fd\u67e5\u770b\u60a8\u7684\u8ab2\u7a0b"),r.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:()=>{n("/login")}})),t&&"insturctor"==t.user.role&&r.a.createElement("div",null,r.a.createElement("h1",null,"\u6b61\u8fce\u4f86\u5230\u8b1b\u5e2b\u8ab2\u7a0b\u9801\u9762")),t&&c&&0!=c.length&&r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},c.map(e=>r.a.createElement("div",{className:"card",style:{width:"18rem",margin:"1rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"\u8ab2\u7a0b\u540d\u7a31\uff1a",e.title),r.a.createElement("p",{style:{margin:"0.5rem 0rem"},className:"card-text"},e.description),r.a.createElement("p",{style:{margin:"0.5rem 0rem"}},"\u5b78\u751f\u4eba\u6578\uff1a",e.student.length),r.a.createElement("p",{style:{margin:"0.5rem 0rem"}},"\u8ab2\u7a0b\u50f9\u683c\uff1a",e.price))))))};var f=e=>{let{currentUser:t,setCurrentUser:a}=e,[n,c]=Object(l.useState)(""),[s,o]=Object(l.useState)(""),[u,i]=Object(l.useState)(0),[E,d]=Object(l.useState)("");const p=Object(m.p)();return r.a.createElement("div",{style:{padding:"3rem"}},!t&&r.a.createElement("div",null,r.a.createElement("p",null,"\u5728\u767c\u5e03\u65b0\u8ab2\u7a0b\u4e4b\u524d\uff0c\u60a8\u5fc5\u9808\u5148\u767b\u9304\u3002"),r.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:()=>{p("/login")}},"\u5e36\u6211\u9032\u5165\u767b\u9304\u9801\u9762\u3002")),t&&"instructor"!==t.user.role&&r.a.createElement("div",null,r.a.createElement("p",null,"\u53ea\u6709\u8b1b\u5e2b\u53ef\u4ee5\u767c\u5e03\u65b0\u8ab2\u7a0b\u3002")),t&&"instructor"==t.user.role&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleforTitle"},"\u8ab2\u7a0b\u6a19\u984c\uff1a"),r.a.createElement("input",{name:"title",type:"text",className:"form-control",id:"exampleforTitle",onChange:e=>{c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{for:"exampleforContent"},"\u5167\u5bb9\uff1a"),r.a.createElement("textarea",{className:"form-control",id:"exampleforContent","aria-describedby":"emailHelp",name:"content",onChange:e=>{o(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{for:"exampleforPrice"},"\u50f9\u683c\uff1a"),r.a.createElement("input",{name:"price",type:"number",className:"form-control",id:"exampleforPrice",onChange:e=>{i(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-primary",onClick:()=>{h.post(n,s,u).then(()=>{window.alert("\u65b0\u8ab2\u7a0b\u5df2\u5275\u5efa\u6210\u529f"),p("/course")}).catch(e=>{console.log(e.response),d(e.response.data)})}},"\u4ea4\u51fa\u8868\u55ae"),r.a.createElement("br",null),r.a.createElement("br",null),E&&r.a.createElement("div",{className:"alert alert-warning",role:"alert"},E)))};var C=e=>{let{currentUser:t,setCurrentUser:a}=e;const n=Object(m.p)();let[c,s]=Object(l.useState)(""),[o,u]=Object(l.useState)(null);const i=e=>{h.enroll(e.target.id).then(()=>{window.alert("\u8ab2\u7a0b\u8a3b\u518a\u6210\u529f\u3002\u91cd\u65b0\u5c0e\u5411\u5230\u8ab2\u7a0b\u9801\u9762\u3002"),n("/course")}).catch(e=>{console.log(e)})};return r.a.createElement("div",{style:{padding:"3rem"}},!t&&r.a.createElement("div",null,r.a.createElement("p",null,"You must login first before searching for courses."),r.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:()=>{n("/login")}},"Take me to login page.")),t&&"instructor"==t.user.role&&r.a.createElement("div",null,r.a.createElement("h1",null,"Only students can enroll in courses.")),t&&"student"==t.user.role&&r.a.createElement("div",{className:"search input-group mb-3"},r.a.createElement("input",{onChange:e=>{s(e.target.value)},type:"text",className:"form-control"}),r.a.createElement("button",{onClick:()=>{h.getCourseByName(c).then(e=>{console.log(e),u(e.data)}).catch(e=>{console.log(e)})},className:"btn btn-primary"},"Search")),t&&o&&0!=o.length&&r.a.createElement("div",null,r.a.createElement("p",null,"\u6211\u5011\u5f9e API \u8fd4\u56de\u7684\u6578\u64da\u3002"),o.map(e=>r.a.createElement("div",{key:e._id,className:"card",style:{width:"18rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"\u8ab2\u7a0b\u540d\u7a31\uff1a",e.title),r.a.createElement("p",{className:"card-text"},e.description),r.a.createElement("p",null,"\u50f9\u683c: ",e.price),r.a.createElement("p",null,"\u76ee\u524d\u7684\u5b78\u751f\u4eba\u6578: ",e.students.length),r.a.createElement("a",{href:"#",onClick:i,className:"card-text btn btn-primary",id:e._id},"\u8a3b\u518a\u8ab2\u7a0b"))))))};var S=function(){let[e,t]=Object(l.useState)(i.getCurrentUser());return r.a.createElement(s.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",element:r.a.createElement(d,{currentUser:e,setCurrentUser:t})},r.a.createElement(m.b,{index:!0,element:r.a.createElement(p,null)}),r.a.createElement(m.b,{path:"register",element:r.a.createElement(g,null)}),r.a.createElement(m.b,{path:"login",element:r.a.createElement(b,{currentUser:e,setCurrentUser:t})}),r.a.createElement(m.b,{path:"profile",element:r.a.createElement(v,{currentUser:e,setCurrentUser:t})}),r.a.createElement(m.b,{path:"course",element:r.a.createElement(y,{currentUser:e,setCurrentUser:t})}),r.a.createElement(m.b,{path:"postCourse",element:r.a.createElement(f,{currentUser:e,setCurrentUser:t})}),r.a.createElement(m.b,{path:"enroll",element:r.a.createElement(C,{currentUser:e,setCurrentUser:t})}))))};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)))}},[[13,1,2]]]);
//# sourceMappingURL=main.7373a669.chunk.js.map